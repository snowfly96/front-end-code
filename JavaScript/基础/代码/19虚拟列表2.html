<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #root {
            height: 397px;
            width: 400px;
            overflow: scroll;
            border: 1px solid black;
        }

        #container {
            background-color: bisque;
            border: blueviolet 1px solid;
        }

        .item-list {
            border: 1px solid red;
        }
    </style>
</head>

<body>
    <div id="root">
        <div id="container">

        </div>
    </div>
    <script>
        // 1. 初始化数据
        const data = [
            { id: 1, name: 'John Doe', age: 25 },
            { id: 2, name: 'Jane Smith', age: 30 },
            { id: 3, name: 'Jane Smith', age: 30 },
            { id: 4, name: 'Jane Smith', age: 30 },
            { id: 5, name: 'Jane Smith', age: 30 },
            { id: 6, name: 'Jane Smith', age: 30 },
            { id: 7, name: 'Jane Smith', age: 30 },
            { id: 8, name: 'Jane Smith', age: 30 },
            { id: 9, name: 'Jane Smith', age: 30 },
            { id: 10, name: 'Jane Smith', age: 30 },
            { id: 11, name: 'Jane Smith', age: 30 },
            { id: 12, name: 'Jane Smith', age: 30 },
            { id: 13, name: 'Jane Smith', age: 30 },
            { id: 14, name: 'Jane Smith', age: 30 },
            { id: 15, name: 'Jane Smith', age: 30 },
            { id: 16, name: 'Jane Smith', age: 30 },
            { id: 17, name: 'Jane Smith', age: 30 },
            { id: 18, name: 'Jane Smith', age: 30 },
            { id: 19, name: 'Jane Smith', age: 30 },
            { id: 20, name: 'Jane Smith', age: 30 },
            { id: 21, name: 'Jane Smith', age: 30 },
            { id: 22, name: 'Jane Smith', age: 30 },
            { id: 23, name: 'Jane Smith', age: 30 },
            { id: 24, name: 'Jane Smith', age: 30 },
            { id: 25, name: 'Jane Smith', age: 30 },
            { id: 26, name: 'Jane Smith', age: 30 },
            { id: 27, name: 'Jane Smith', age: 30 },
            { id: 28, name: 'Jane Smith', age: 30 },
            { id: 29, name: 'Jane Smith', age: 30 },
            { id: 30, name: 'Jane Smith', age: 30 },
            // ... 其他数据
        ]
        // console.log(container.offsetHeight)
        // console.log(container.clientHeight)
        // console.log(getComputedStyle(container).height)
        const container = document.getElementById("container")
        const root = document.getElementById("root")
        const itemHeight = 47
        const pageSize = 9

        function renderList (start, end) {
            container.innerHTML = ''
            for (let i = start; i < end; i++) {
                let { id, name, age } = data[i]
                const item = document.createElement('div')
                item.classList.add('item-list')
                item.style.height = itemHeight + 'px'
                item.textContent = `${id}-${name}-${age}`
                container.appendChild(item)
            }
        }

        function updateList () {
            // 2. 获取start, end
            let start = Math.floor(root.scrollTop / itemHeight) // root.scrollTop
            let end = Math.min(start + pageSize, data.length)
            renderList(start, end)
            container.style.paddingTop = start * itemHeight + 'px' // 设置padding
            container.style.paddingBottom = (data.length - end) * itemHeight + 'px'
        }

        updateList()

        root.addEventListener('scroll', updateList)
    </script>
</body>

</html>